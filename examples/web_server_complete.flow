-- Complete Web Server Example
-- Demonstrates: std:web, std:url, std:stream, std:json

circle web from "std:web"
circle url from "std:url"
circle stream from "std:stream"
circle json from "std:json"

shout("ğŸš€ FlowLang Web Server")
shout("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”")
shout("")

-- Request handler

-- Request handler
cast Spell handler(req, res) -> Relic<Flux, Flux> {
    let path = req.path
    
    shout("ğŸ“¨ " + req.method + " " + path)
    
    -- Simple routing
    in Stance (path is~ "/") {
        return res.json("Hello World")
    }
    
    return res.notFound()
}

-- Start server
shout("ğŸŒ Server: http://localhost:3000")
shout("ğŸ“¡ Endpoints:")
shout("   GET /           - Homepage")
shout("")
shout("Press Ctrl+C to stop")
shout("")

web.serve(3000, handler)
