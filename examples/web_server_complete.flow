-- Complete Web Server Example
-- Demonstrates: std:web, std:url, std:stream, std:json

circle web from "std:web"
circle url from "std:url"
circle stream from "std:stream"
circle json from "std:json"

shout("ğŸš€ FlowLang Web Server")
shout("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”")
shout("")

-- Request handler
cast Spell handler(req, res) -> Hollow {
    -- Parse the URL to get query params
    let path = req.path
    let query = req.query
    
    shout("ğŸ“¨ " + req.method + " " + path)
    
    -- Simple routing (user handles manually)
    in Stance (path is~ "/") {
        res.json({
            "Greetings" : "hello World"
      })
    }
}

-- Start server
shout("ğŸŒ Server: http://localhost:3000")
shout("ğŸ“¡ Endpoints:")
shout("   GET /           - Homepage")
shout("")
shout("Press Ctrl+C to stop")
shout("")

web.serve(3000, handler)
