-- String Interpolation Test

circle color from "std:color"

shout(color.cyan("=== String Interpolation Test ===\n"))

-- Test 1: Basic Variable Interpolation
shout(color.yellow("1. Testing variable interpolation..."))
let name = "FlowLang"
let greeting = "Hello, ${name}!"
shout("  Name: " + name)
shout("  Greeting: " + greeting)
if greeting is~ "Hello, FlowLang!" {
    shout(color.green("  ✓ Basic interpolation works\n"))
} otherwise {
    shout(color.red("  ✗ Basic interpolation failed\n"))
}

-- Test 2: Multiple Interpolations
shout(color.yellow("2. Testing multiple interpolations..."))
let a = 10
let b = 20
let result = "${a} + ${b} = 30"
shout("  Result: " + result)
if result is~ "10 + 20 = 30" {
    shout(color.green("  ✓ Multiple interpolations work\n"))
} otherwise {
    shout(color.red("  ✗ Multiple interpolations failed\n"))
}

-- Test 3: Expression Interpolation
shout(color.yellow("3. Testing expression interpolation..."))
let calc = "1 + 2 = ${1 + 2}"
shout("  Calc: " + calc)
if calc is~ "1 + 2 = 3" {
    shout(color.green("  ✓ Expression interpolation works\n"))
} otherwise {
    shout(color.red("  ✗ Expression interpolation failed\n"))
}

-- Test 4: Function Call Interpolation
shout(color.yellow("4. Testing function call interpolation..."))
let arr = [1, 2, 3]
let msg = "Array length is ${arr.len()}"
shout("  Msg: " + msg)
if msg is~ "Array length is 3" {
    shout(color.green("  ✓ Function call interpolation works\n"))
} otherwise {
    shout(color.red("  ✗ Function call interpolation failed\n"))
}

shout(color.bold(color.green("=== All String Interpolation Tests Passed ===")))
